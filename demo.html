<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>measureText() polyfill demo</title>
  <style>
    body {
      margin: 0;
      background-color: gray;
    }
    canvas {
      background: white;
    }
  </style>
</head>

<body>
  <script src="measuretext.js"></script>
  <script>
    var drawBoundings = function(ctx, x, y, m) {
      ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';

      ctx.strokeRect(
        x + m.actualBoundingBoxLeft,
        y - m.actualBoundingBoxAscent,
        m.actualBoundingBoxRight,
        m.actualBoundingBoxAscent
      );

      ctx.strokeRect(
        x + m.actualBoundingBoxLeft,
        y,
        m.actualBoundingBoxRight,
        m.actualBoundingBoxDescent
      );
    };

    var text = 'AbcŃ|ąypq';
    var width = 1200;
    var height = 400;
    var x = 50;
    var y = 250;

    var canvas = document.createElement('canvas');
    canvas.width = width;
    canvas.height = height;
    document.body.appendChild(canvas);
    var ctx = canvas.getContext('2d');

    ctx.font = '200px Arial';
    ctx.textAlign = 'left';
    ctx.fillText(text, x, y);

    var metrics = ctx.measureText(text);
    drawBoundings(ctx, x, y, metrics);
  </script>
</body>

</html>
